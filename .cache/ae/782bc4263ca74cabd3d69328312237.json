{"id":"node_modules/@snap/camera-kit/lib/clients/createTsProtoClient.js","dependencies":[{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/clients/createTsProtoClient.js.map","includedInParent":true,"mtime":1710948721143},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/package.json","includedInParent":true,"mtime":1710952305120},{"name":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/package.json","includedInParent":true,"mtime":1710948721086},{"name":"tslib","loc":{"line":1,"column":26,"index":26},"parent":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/clients/createTsProtoClient.js","resolved":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/node_modules/tslib/tslib.es6.js"},{"name":"../common/entries","loc":{"line":2,"column":37,"index":72},"parent":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/clients/createTsProtoClient.js","resolved":"/Users/eneto/Lab/snap-rca-camkit-workshop/node_modules/@snap/camera-kit/lib/common/entries.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createTsProtoClient = createTsProtoClient;\nvar _tslib = require(\"tslib\");\nvar _entries = require(\"../common/entries\");\nfunction messageClass(message, data) {\n  return class Message {\n    constructor() {\n      Object.assign(this, message.fromPartial(data));\n    }\n    static deserializeBinary(data) {\n      const protobufMessage = new Message();\n      return Object.assign(Object.assign({}, protobufMessage), message.decode(data));\n    }\n    serializeBinary() {\n      return message.encode(this).finish();\n    }\n    toObject() {\n      return this;\n    }\n  };\n}\n/**\n * Convert a service definition generated by ts-proto (using the `outputServices=generic-definitions` CLI option) into\n * a working client.\n *\n * @param serviceDefinition\n * @param handler\n * @returns A client that can make requests to a remote service by sending Protobuf-encoded messages over HTTP using the\n * grpc-web package.\n *\n * @internal\n */\nfunction createTsProtoClient(serviceDefinition, handler) {\n  return (0, _entries.fromEntries)((0, _entries.entries)(serviceDefinition.methods).map(([methodName, methodDefinition]) => {\n    return [methodName, request => (0, _tslib.__awaiter)(this, void 0, void 0, function* () {\n      const requestType = messageClass(methodDefinition.requestType, request);\n      const responseType = messageClass(methodDefinition.responseType, {});\n      return handler({\n        serviceName: serviceDefinition.fullName,\n        methodName: methodDefinition.name,\n        requestType,\n        responseType\n      });\n    })];\n    // Safety: We're mapping from the method definitions object into the GrpcServiceClient object in a manner\n    // that preserves each key in the method definitions object, pairing it with the corresponding\n    // serialization/deserialization logic for that particular method. But in doing this, we lose type\n    // specificity by converting the method definition object to a list of entries, mapping them, and then\n    // converting back into the client object -- so we're forced into this type cast.\n  }));\n}"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":0}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":15}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":8,"column":22}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":0},"generated":{"line":9,"column":0}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":9},"generated":{"line":9,"column":9}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":21},"generated":{"line":9,"column":21}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":25},"generated":{"line":9,"column":22}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":51},"generated":{"line":9,"column":29}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":53},"generated":{"line":9,"column":31}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":60},"generated":{"line":9,"column":35}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":49,"column":60},"generated":{"line":9,"column":37}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":50,"column":4},"generated":{"line":10,"column":2}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":10,"column":9}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":50,"column":17},"generated":{"line":10,"column":15}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":50,"column":24},"generated":{"line":10,"column":22}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":50,"column":24},"generated":{"line":10,"column":23}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":11,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":11,"column":15}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":11,"column":16}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":11,"column":18}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":12},"generated":{"line":12,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":18},"generated":{"line":12,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":19},"generated":{"line":12,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":25},"generated":{"line":12,"column":19}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":26},"generated":{"line":12,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":12,"column":24}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":12,"column":26}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":39},"generated":{"line":12,"column":33}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":40},"generated":{"line":12,"column":34}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":51},"generated":{"line":12,"column":45}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":52},"generated":{"line":12,"column":46}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":56},"generated":{"line":12,"column":50}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":57},"generated":{"line":12,"column":51}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":52,"column":58},"generated":{"line":12,"column":52}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":13,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":14,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":15},"generated":{"line":14,"column":11}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":32},"generated":{"line":14,"column":28}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":14,"column":29}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":49},"generated":{"line":14,"column":33}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":55,"column":49},"generated":{"line":14,"column":35}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":15,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":15,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":33},"generated":{"line":15,"column":27}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":36},"generated":{"line":15,"column":30}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":40},"generated":{"line":15,"column":34}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":47},"generated":{"line":15,"column":41}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":47},"generated":{"line":15,"column":42}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":56,"column":49},"generated":{"line":15,"column":43}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":12},"generated":{"line":16,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":19}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":26}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":27}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":33}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":34}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":40}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":41}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":42}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":19},"generated":{"line":16,"column":43}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":24},"generated":{"line":16,"column":45}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":39},"generated":{"line":16,"column":60}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":39},"generated":{"line":16,"column":61}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":44},"generated":{"line":16,"column":63}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":51},"generated":{"line":16,"column":70}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":52},"generated":{"line":16,"column":71}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":58},"generated":{"line":16,"column":77}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":59},"generated":{"line":16,"column":78}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":63},"generated":{"line":16,"column":82}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":64},"generated":{"line":16,"column":83}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":57,"column":77},"generated":{"line":16,"column":84}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":58,"column":8},"generated":{"line":17,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":18,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":18,"column":19}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":18,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":60,"column":23},"generated":{"line":18,"column":22}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":12},"generated":{"line":19,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":19},"generated":{"line":19,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":26},"generated":{"line":19,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":27},"generated":{"line":19,"column":21}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":33},"generated":{"line":19,"column":27}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":34},"generated":{"line":19,"column":28}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":45},"generated":{"line":19,"column":32}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":46},"generated":{"line":19,"column":33}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":47},"generated":{"line":19,"column":34}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":53},"generated":{"line":19,"column":40}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":53},"generated":{"line":19,"column":41}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":61,"column":55},"generated":{"line":19,"column":42}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":62,"column":8},"generated":{"line":20,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":21,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":63,"column":16},"generated":{"line":21,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":63,"column":16},"generated":{"line":21,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":63,"column":16},"generated":{"line":21,"column":15}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":64,"column":12},"generated":{"line":22,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":64,"column":19},"generated":{"line":22,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":64,"column":23},"generated":{"line":22,"column":17}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":23,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":66,"column":5},"generated":{"line":24,"column":3}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":67,"column":0},"generated":{"line":25,"column":0}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":69,"column":0},"generated":{"line":26,"column":0}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":80,"column":6},"generated":{"line":37,"column":0}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":80,"column":16},"generated":{"line":37,"column":9}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":80,"column":35},"generated":{"line":37,"column":28}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":81,"column":4},"generated":{"line":37,"column":29}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":81,"column":24},"generated":{"line":37,"column":46}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":82,"column":4},"generated":{"line":37,"column":48}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":82,"column":24},"generated":{"line":37,"column":55}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":82,"column":24},"generated":{"line":37,"column":57}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":84,"column":4},"generated":{"line":38,"column":2}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":38,"column":9}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":84,"column":11},"generated":{"line":38,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":84,"column":22},"generated":{"line":38,"column":33}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":38,"column":35}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":8},"generated":{"line":38,"column":39}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":15},"generated":{"line":38,"column":55}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":16},"generated":{"line":38,"column":57}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":33},"generated":{"line":38,"column":74}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":34},"generated":{"line":38,"column":75}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":41},"generated":{"line":38,"column":82}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":42},"generated":{"line":38,"column":83}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":43},"generated":{"line":38,"column":84}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":46},"generated":{"line":38,"column":87}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":47},"generated":{"line":38,"column":88}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":48},"generated":{"line":38,"column":89}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":49},"generated":{"line":38,"column":90}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":59},"generated":{"line":38,"column":100}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":61},"generated":{"line":38,"column":102}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":77},"generated":{"line":38,"column":118}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":78},"generated":{"line":38,"column":119}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":85,"column":82},"generated":{"line":38,"column":124}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":86,"column":12},"generated":{"line":39,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":86,"column":19},"generated":{"line":39,"column":11}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":87,"column":16},"generated":{"line":39,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":87,"column":26},"generated":{"line":39,"column":22}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":23},"generated":{"line":39,"column":24}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":39},"generated":{"line":39,"column":31}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":35}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":39}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":55}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":57}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":61}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":63}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":68}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":69}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":71}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":76}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":77}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":79}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":88,"column":43},"generated":{"line":39,"column":92}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":20},"generated":{"line":40,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":26},"generated":{"line":40,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":37},"generated":{"line":40,"column":23}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":40},"generated":{"line":40,"column":26}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":52},"generated":{"line":40,"column":38}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":53},"generated":{"line":40,"column":39}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":69},"generated":{"line":40,"column":55}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":70},"generated":{"line":40,"column":56}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":81},"generated":{"line":40,"column":67}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":83},"generated":{"line":40,"column":69}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":90},"generated":{"line":40,"column":76}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":89,"column":91},"generated":{"line":40,"column":77}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":20},"generated":{"line":41,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":26},"generated":{"line":41,"column":12}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":38},"generated":{"line":41,"column":24}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":41},"generated":{"line":41,"column":27}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":53},"generated":{"line":41,"column":39}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":54},"generated":{"line":41,"column":40}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":70},"generated":{"line":41,"column":56}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":71},"generated":{"line":41,"column":57}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":83},"generated":{"line":41,"column":69}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":85},"generated":{"line":41,"column":71}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":85},"generated":{"line":41,"column":72}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":87},"generated":{"line":41,"column":73}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":90,"column":88},"generated":{"line":41,"column":74}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":91,"column":20},"generated":{"line":42,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":91,"column":27},"generated":{"line":42,"column":13}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":91,"column":34},"generated":{"line":42,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":91,"column":35},"generated":{"line":42,"column":21}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":24},"generated":{"line":43,"column":8}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":35},"generated":{"line":43,"column":19}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":37},"generated":{"line":43,"column":21}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":54},"generated":{"line":43,"column":38}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":55},"generated":{"line":43,"column":39}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":92,"column":63},"generated":{"line":43,"column":47}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":24},"generated":{"line":44,"column":8}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":34},"generated":{"line":44,"column":18}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":36},"generated":{"line":44,"column":20}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":52},"generated":{"line":44,"column":36}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":53},"generated":{"line":44,"column":37}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":93,"column":57},"generated":{"line":44,"column":41}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":94,"column":24},"generated":{"line":45,"column":8}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":94,"column":35},"generated":{"line":45,"column":19}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":95,"column":24},"generated":{"line":46,"column":8}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":96,"column":21},"generated":{"line":47,"column":7}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":96,"column":22},"generated":{"line":47,"column":8}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":97,"column":16},"generated":{"line":48,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":97,"column":17},"generated":{"line":48,"column":5}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":97,"column":17},"generated":{"line":48,"column":6}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":98,"column":13},"generated":{"line":48,"column":7}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":99,"column":12},"generated":{"line":49,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":100,"column":12},"generated":{"line":50,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":101,"column":12},"generated":{"line":51,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":102,"column":12},"generated":{"line":52,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":103,"column":12},"generated":{"line":53,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":104,"column":8},"generated":{"line":54,"column":2}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":104,"column":9},"generated":{"line":54,"column":3}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":104,"column":10},"generated":{"line":54,"column":4}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":105,"column":29},"generated":{"line":54,"column":5}},{"source":"../../src/clients/createTsProtoClient.ts","name":null,"original":{"line":106,"column":0},"generated":{"line":55,"column":0}}],"sources":{"../../src/clients/createTsProtoClient.ts":"import { grpc } from \"@improbable-eng/grpc-web\";\nimport { Writer } from \"protobufjs\";\nimport { entries, fromEntries } from \"../common/entries\";\nimport { Exact, DeepPartial } from \"../generated-proto/pb_schema/camera_kit/v3/service\";\nimport { Result } from \"../common/result\";\nimport { GrpcHandler } from \"./grpcHandler\";\n\ntype TsProtoServiceDefinition<Methods extends TsProtoMethods> = {\n    name: string;\n    fullName: string;\n    methods: Methods;\n};\n\ntype TsProtoMethods = { [methodName: string]: TsProtoMethodDefinition<any, any> };\n\ntype TsProtoMethodDefinition<Request, Response> = {\n    name: string;\n    requestType: TsProtoMessage<Request>;\n    responseType: TsProtoMessage<Response>;\n};\n\ntype TsProtoMessage<M> = {\n    encode: (message: M) => Writer;\n    decode: (message: Uint8Array) => M;\n    fromPartial: (partialMessage: any) => M;\n};\n\nexport type GrpcServiceClient<S extends TsProtoServiceDefinition<any>> = {\n    [MethodName in keyof S[\"methods\"]]: InferGrpcMethod<S[\"methods\"][MethodName]>;\n};\n\ninterface UnaryOutput<M> {\n    status: grpc.Code;\n    statusMessage: string;\n    headers: grpc.Metadata;\n    message: M | null;\n    trailers: grpc.Metadata;\n}\n\ntype InferGrpcMethod<M extends TsProtoMethodDefinition<any, any>> = M extends TsProtoMethodDefinition<\n    infer Request,\n    infer Response\n>\n    ? <I extends Exact<DeepPartial<Request>, I>>(\n          request: I\n      ) => Promise<Result<UnaryOutput<Response & grpc.ProtobufMessage>, UnaryOutput<Response & grpc.ProtobufMessage>>>\n    : never;\n\nfunction messageClass<M>(message: TsProtoMessage<M>, data: M): grpc.ProtobufMessageClass<grpc.ProtobufMessage> {\n    return class Message implements grpc.ProtobufMessage {\n        constructor() {\n            Object.assign(this, message.fromPartial(data));\n        }\n\n        static deserializeBinary(data: Uint8Array): Message {\n            const protobufMessage = new Message();\n            return { ...protobufMessage, ...message.decode(data) } as Message;\n        }\n\n        serializeBinary(): Uint8Array {\n            return message.encode(this as any).finish();\n        }\n        toObject(): this {\n            return this;\n        }\n    };\n}\n\n/**\n * Convert a service definition generated by ts-proto (using the `outputServices=generic-definitions` CLI option) into\n * a working client.\n *\n * @param serviceDefinition\n * @param handler\n * @returns A client that can make requests to a remote service by sending Protobuf-encoded messages over HTTP using the\n * grpc-web package.\n *\n * @internal\n */\nexport function createTsProtoClient<Methods extends TsProtoMethods, S extends TsProtoServiceDefinition<Methods>>(\n    serviceDefinition: S,\n    handler: GrpcHandler\n): GrpcServiceClient<S> {\n    return fromEntries(\n        entries(serviceDefinition.methods).map(([methodName, methodDefinition]) => {\n            return [\n                methodName,\n                async (request: unknown) => {\n                    const requestType = messageClass(methodDefinition.requestType, request);\n                    const responseType = messageClass(methodDefinition.responseType, {});\n                    return handler({\n                        serviceName: serviceDefinition.fullName,\n                        methodName: methodDefinition.name,\n                        requestType,\n                        responseType,\n                    });\n                },\n            ];\n            // Safety: We're mapping from the method definitions object into the GrpcServiceClient object in a manner\n            // that preserves each key in the method definitions object, pairing it with the corresponding\n            // serialization/deserialization logic for that particular method. But in doing this, we lose type\n            // specificity by converting the method definition object to a list of entries, mapping them, and then\n            // converting back into the client object -- so we're forced into this type cast.\n        })\n    ) as GrpcServiceClient<S>;\n}\n"},"lineCount":null}},"error":null,"hash":"a66b7ee1d92a64058c03a6f0f448521d","cacheData":{"env":{}}}